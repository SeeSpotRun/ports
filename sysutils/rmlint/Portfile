# -*- coding: utf-8; mode: tcl; tab-width: 4; indent-tabs-mode: nil; c-basic-offset: 4 -*- vim:fenc=utf-8:ft=tcl:et:sw=4:ts=4:sts=4

PortSystem          1.0
PortGroup           github 1.0

github.setup        SeeSpotRun rmlint a5fe1c1a5708a22cce80f1f9aea3c77c7e5f2eb5
version             20210526

platforms           darwin
categories          sysutils
license             GPL-3
maintainers         SeeSpotRun
description         remove dupes and other lint from your filesystem
long_description    ${name} is a powerful duplicate file and other lint finder

checksums           rmd160  88a3d2b4194b77789eaf6ad181459a78617f1045 \
                    sha256  198959c78ebbb0e5cb78708caf81cb83294dca97f8efd840776f3eb75d356780 \
                    size    2496847

use_configure       no

configure.python    ${prefix}/bin/python3.9

depends_build       port:gettext \
                    port:pkgconfig \
                    port:scons \
                    port:py-sphinx \
                    port:glib2 \
                    port:json-glib \
                    port:libelf \

build.cmd           scons
build.target
build.post_args     VERBOSE=1 \
                    --without-gui

destroot.cmd        scons
destroot.post_args  VERBOSE=1 \
                    --prefix=${destroot}${prefix} \
                    --without-gui

destroot.destdir    prefix=${destroot}${prefix}
destroot.target     install

variant gui description {Add gui 'shredder'} {
    # work-in-progress gui variant...
    # currently doesn't build due to permission errors:
    depends_build-append \
                    port:gtk3 \
                    port:py-gobject3 \
                    port:librsvg \
                    port:xorg-server \
                    port:adwaita-icon-theme \
                    port:gsettings-desktop-schemas \
                    port:gtksourceview3

    build.post_args-delete --without-gui
    build.post_args-append PYTHON=python3.9
    destroot.post_args-delete --without-gui
    destroot.post_args-append PYTHON=python3.9

    notes "
The rmlint gui can be started via 'rmlint --gui' or 'shredder'.
You may need to set your PYTHONPATH environment variable first via:
export PYTHONPATH=\"/opt/local/lib/python3.9/site-packages:\$PYTHONPATH\"
"
}
